<div {{ attributes }} class="h-full">

    <div class="flex flex-col justify-between h-full">

        <div class="flex flex-col justify-between pb-4">

            <div class="flex flex-row justify-end items-center gap-2 px-5 py-4 border-b">

                {# filtro de busca de contatos #}
                <div class="relative rounded-md shadow-sm">
                    <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                        <span class="text-gray-500">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 3C5.3505 3 3 5.3505 3 8.25C3 11.1495 5.3505 13.5 8.25 13.5C11.1495 13.5 13.5 11.1495 13.5 8.25C13.5 5.3505 11.1495 3 8.25 3ZM1.5 8.25C1.5 4.52208 4.52208 1.5 8.25 1.5C11.9779 1.5 15 4.52208 15 8.25C15 11.9779 11.9779 15 8.25 15C4.52208 15 1.5 11.9779 1.5 8.25Z" fill="#64748B"/>
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M11.957 11.9572C12.2499 11.6643 12.7247 11.6643 13.0176 11.9572L16.2801 15.2197C16.573 15.5126 16.573 15.9875 16.2801 16.2804C15.9872 16.5733 15.5124 16.5733 15.2195 16.2804L11.957 13.0179C11.6641 12.725 11.6641 12.2501 11.957 11.9572Z" fill="#64748B"/>
                            </svg>
                        </span>
                    </div>
                    <input
                        data-model="query"
                        placeholder="Results update as you type..."
                        type="text"
                        class="block w-full rounded-md border-0 pl-9 pe-4 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6">
                </div>

                <div class="flex flex-row items-center gap-3">
                    {# reload #}
                    <button
                        data-action="live#$render"
                        class="px-2 py-2 rounded bg-gray-200 hover:bg-gray-300">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                            <path d="M16.243 11.024C16.3113 10.6923 16.1144 10.3513 15.7686 10.2587C15.4369 10.1904 15.0959 10.3872 15.0032 10.733C14.5962 12.5593 13.4555 14.1273 11.8479 15.0554C8.65718 16.8976 4.58472 15.8064 2.74253 12.6156C0.900341 9.42483 1.99156 5.35236 5.18232 3.51018C7.54494 2.14611 10.4693 2.3738 12.5977 4.03532L11.1858 4.23348C10.8232 4.28044 10.5909 4.60939 10.6482 4.93357C10.666 5.0207 10.6838 5.10784 10.712 5.15655C10.8385 5.37576 11.0728 5.50031 11.3483 5.47117L14.2734 5.08139C14.636 5.03442 14.8683 4.70547 14.811 4.38129L14.4212 1.45617C14.3743 1.09357 14.0453 0.861306 13.7211 0.918566C13.3585 0.965531 13.1263 1.29449 13.1835 1.61866L13.3433 3.02033C10.8193 1.06754 7.35056 0.796926 4.52515 2.42818C0.749819 4.60786 -0.571641 9.46278 1.62211 13.2625C3.81586 17.0622 8.65671 18.3593 12.4564 16.1655C14.3806 15.0546 15.7677 13.182 16.243 11.024Z" fill="#64748B"/>
                        </svg>
                    </button>
                </div>
            </div>

            <table class="border-collapse table-auto w-full text-sm">
                <thead>
                    <tr class="">
                        <th class="px-3 py-4 text-base text-gray-600 font-semibold border-b">Check</th>
                        <th class="px-3 py-4 text-base text-gray-600 font-semibold border-b">Name</th>
                        <th class="px-3 py-4 text-base text-gray-600 font-semibold border-b">Email</th>
                        <th class="px-3 py-4 text-base text-gray-600 font-semibold border-b">Date</th>
                        <th class="px-3 py-4 text-base text-gray-600 font-semibold border-b">#</th>
                    </tr>
                </thead>
                <tbody>

                   {% if this.contacts|length > 0 %}

                        {% for contact in this.contacts %}

                            <tr data-loading="addClass(opacity-50)" class="{{ loop.last ? '' : 'border-b'}}">
                                <td class="py-4 flex flex-row justify-center gap-3">

                                    <button
                                        data-action="live#action"
                                        data-action-name="star(id={{ contact.id }})"
                                        id="{{ 'star-' ~ contact.id }}"
                                        type="button">

                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <path d="M11.1034 3.81665C11.4703 3.07349 12.53 3.07349 12.8968 3.81665L14.8577 7.78911C15.0032 8.08396 15.2844 8.28842 15.6098 8.33598L19.9964 8.97714C20.8163 9.09698 21.1431 10.1048 20.5495 10.683L17.3769 13.773C17.1411 14.0028 17.0334 14.3339 17.0891 14.6584L17.8376 19.0227C17.9777 19.8396 17.1201 20.4626 16.3865 20.0768L12.4656 18.0148C12.1742 17.8616 11.8261 17.8616 11.5347 18.0148L7.61377 20.0768C6.88014 20.4626 6.02259 19.8396 6.16271 19.0227L6.91122 14.6584C6.96689 14.3339 6.85922 14.0028 6.62335 13.773L3.45082 10.683C2.85722 10.1048 3.18401 9.09698 4.00392 8.97714L8.39051 8.33598C8.71586 8.28842 8.99704 8.08396 9.14258 7.78911L11.1034 3.81665Z" fill="{{ contact.star ? '#FFD02C' : '#DFE3F0' }}"/>
                                        </svg>
                                    </button>

                                </td>
                                <td class="px-3 py-4 text-base text-gray-500">{{ contact.name }}</td>
                                <td class="px-3 py-4 text-base text-gray-500">{{ contact.email }}</td>
                                <td class="px-3 py-4 text-base text-gray-500 text-center">{{ contact.createdAt|date("H:m:i d/m/y") }}</td>
                                <td class="px-3 py-4 text-base text-gray-500 text-center">

                                    <div class="flex flex-row justify-center gap-2">

                                        <button
                                            data-action="live#action"
                                            data-action-name="trash(id={{ contact.id }})"
                                            onclick="return confirm('Are you sure you want to delete this item?');"
                                            id="{{ 'trash-' ~ contact.id }}"
                                            type="button"
                                            class="px-1 py-1 h-7 rounded bg-red-500 hover:bg-red-600">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M13.7535 2.4749H11.5879V1.99678C11.5879 1.15303 10.9129 0.478027 10.0691 0.478027H7.90352C7.05977 0.478027 6.38477 1.15303 6.38477 1.99678V2.4749H4.21914C3.40352 2.4749 2.72852 3.1499 2.72852 3.96553V4.80928C2.72852 5.42803 3.09414 5.93428 3.62852 6.15928L4.07852 15.8905C4.13477 16.8187 4.86602 17.5218 5.79414 17.5218H12.1223C13.0504 17.5218 13.8098 16.7905 13.8379 15.8905L14.3441 6.13115C14.8785 5.90615 15.2441 5.37178 15.2441 4.78115V3.9374C15.2441 3.1499 14.5691 2.4749 13.7535 2.4749ZM7.67852 1.99678C7.67852 1.85615 7.79102 1.74365 7.93164 1.74365H10.0973C10.2379 1.74365 10.3504 1.85615 10.3504 1.99678V2.4749H7.70664V1.99678H7.67852ZM4.02227 3.96553C4.02227 3.85303 4.10664 3.74053 4.24727 3.74053H13.7535C13.866 3.74053 13.9785 3.8249 13.9785 3.96553V4.80928C13.9785 4.92178 13.8941 5.03428 13.7535 5.03428H4.24727C4.13477 5.03428 4.02227 4.9499 4.02227 4.80928V3.96553ZM12.1504 16.2562H5.85039C5.59727 16.2562 5.40039 16.0593 5.40039 15.8343L4.95039 6.2999H13.0785L12.6285 15.8343C12.6004 16.0593 12.4035 16.2562 12.1504 16.2562Z" fill="#FFFFFF"/>
                                                <path d="M9.00039 8.74683C8.66289 8.74683 8.35352 9.02808 8.35352 9.3937V13.7531C8.35352 14.0906 8.63477 14.4 9.00039 14.4C9.33789 14.4 9.64727 14.1187 9.64727 13.7531V9.36558C9.64727 9.02808 9.33789 8.74683 9.00039 8.74683Z" fill="#FFFFFF"/>
                                                <path d="M11.6162 9.28124C11.2787 9.25311 10.9693 9.53436 10.9412 9.87186L10.7724 13.1062C10.7443 13.4437 11.0256 13.7531 11.3631 13.7812H11.3912C11.7287 13.7812 12.0099 13.5281 12.0099 13.1906L12.1787 9.95624C12.2349 9.59061 11.9537 9.30936 11.6162 9.28124Z" fill="#FFFFFF"/>
                                                <path d="M6.35624 9.28124C6.01874 9.30936 5.73749 9.59061 5.76561 9.95624L5.96249 13.2187C5.99061 13.5562 6.27186 13.8094 6.58124 13.8094H6.60936C6.94686 13.7812 7.22811 13.5 7.19999 13.1344L7.03124 9.87186C7.00311 9.53436 6.69374 9.25311 6.35624 9.28124Z" fill="#FFFFFF"/>
                                            </svg>
                                        </button>


                                        <button
                                            data-action="live#action"
                                            data-action-name="unfiling(id={{ contact.id }})"
                                            onclick="return confirm('Are you sure you want to delete this item?');"
                                            id="{{ 'unfiling-' ~ contact.id }}"
                                            type="button"
                                            class="px-1 py-1 h-7 rounded bg-cyan-500 hover:bg-cyan-600">

                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#FFFFFF" class="w-5 h-5">
                                                <path d="M2 3a1 1 0 00-1 1v1a1 1 0 001 1h16a1 1 0 001-1V4a1 1 0 00-1-1H2z" />
                                                <path fill-rule="evenodd" d="M2 7.5h16l-.811 7.71a2 2 0 01-1.99 1.79H4.802a2 2 0 01-1.99-1.79L2 7.5zm5.22 1.72a.75.75 0 011.06 0L10 10.94l1.72-1.72a.75.75 0 111.06 1.06L11.06 12l1.72 1.72a.75.75 0 11-1.06 1.06L10 13.06l-1.72 1.72a.75.75 0 01-1.06-1.06L8.94 12l-1.72-1.72a.75.75 0 010-1.06z" clip-rule="evenodd" />
                                            </svg>


                                        </button>

                                    </div>
                                </td>
                            </tr>

                        {% endfor %}

                    {% else %}
                        <tr>
                            <td colspan="4">Ah! No matching contacts found</td>
                        </tr>
                    {% endif %}

                </tbody>
            </table>
        </div>

        <div class="flex flex-row justify-between border-t py-6 px-7">
            <p class="text-black font-medium text-base">
                {{ (this.offset == 0 ? '1' : this.offset) ~ '-' ~ (this.offset + this.limit) ~ ' of ' ~ this.totalContacts }}
            </p>

            <div class="">
                <button
                    data-action="live#action"
                    data-action-name="paginateContacts(page={{ (this.page == 1) ? this.page : (this.page - 1)  }}, itemName=prev)"
                    class="border-gray-500 rounded bg-gray-300 px-2 py-2 ">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.53033 15.5303C9.23744 15.8232 8.76256 15.8232 8.46967 15.5303L2.46967 9.53033C2.17678 9.23744 2.17678 8.76256 2.46967 8.46967L8.46967 2.46967C8.76256 2.17678 9.23744 2.17678 9.53033 2.46967C9.82322 2.76256 9.82322 3.23744 9.53033 3.53033L4.81066 8.25L15 8.25C15.4142 8.25 15.75 8.58579 15.75 9C15.75 9.41421 15.4142 9.75 15 9.75L4.81066 9.75L9.53033 14.4697C9.82322 14.7626 9.82322 15.2374 9.53033 15.5303Z" fill="#64748B"/>
                    </svg>
                </button>

                {% set totalPages = (this.totalContacts / this.limit)|round(0, 'ceil') %}

                <button
                    {% if totalPages >= (this.page + 1) %}
                        data-action="live#action"
                        data-action-name="paginateContacts(page={{ (this.page + 1) }}, itemName=next)"
                    {% endif %}
                    class="border-gray-500 rounded bg-gray-300 px-2 py-2 ">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M8.46967 2.46967C8.76256 2.17678 9.23744 2.17678 9.53033 2.46967L15.5303 8.46967C15.8232 8.76256 15.8232 9.23744 15.5303 9.53033L9.53033 15.5303C9.23744 15.8232 8.76256 15.8232 8.46967 15.5303C8.17678 15.2374 8.17678 14.7626 8.46967 14.4697L13.1893 9.75H3C2.58579 9.75 2.25 9.41421 2.25 9C2.25 8.58579 2.58579 8.25 3 8.25H13.1893L8.46967 3.53033C8.17678 3.23744 8.17678 2.76256 8.46967 2.46967Z" fill="#64748B"/>
                    </svg>
                </button>
            </div>
        </div>

    </div>
</div>